# Changelog

## v0.6.0

New Builder mode mainly implemented by @MicroOps-cn, huge thanks! üéâ . See docs for details.

‚ö†Ô∏è Breaking change:

Fully implement `/metrics` endpoint. Also `/metric-payload-options` endpoint is recommended to be implemented.

TLDR for start, you can just change endpoint path from `/search` to `/metrics` and it should continue working.

## What's Changed
* chore(deps): update dependency @grafana/eslint-config to v4 by @renovate in https://github.com/simPod/GrafanaJsonDatasource/pull/312
* chore(deps): remove @typescript-eslint/eslint-plugin as direct dep by @simPod in https://github.com/simPod/GrafanaJsonDatasource/pull/313
* chore(deps): update yarn to v3.2.2 by @renovate in https://github.com/simPod/GrafanaJsonDatasource/pull/314
* chore(deps): update dependency @grafana/eslint-config to v5 by @renovate in https://github.com/simPod/GrafanaJsonDatasource/pull/317
* chore(deps): update yarn to v3.2.3 by @renovate in https://github.com/simPod/GrafanaJsonDatasource/pull/323
* chore(deps): update actions/stale action to v6 by @renovate in https://github.com/simPod/GrafanaJsonDatasource/pull/328
* chore(deps): update yarn to v3.2.4 by @renovate in https://github.com/simPod/GrafanaJsonDatasource/pull/329
* feat: add example server by @simPod in https://github.com/simPod/GrafanaJsonDatasource/pull/330
* test: use await in tests so jest does not timeout with no reason by @simPod in https://github.com/simPod/GrafanaJsonDatasource/pull/331
* chore(deps): bump loader-utils from 2.0.2 to 2.0.3 by @dependabot in https://github.com/simPod/GrafanaJsonDatasource/pull/333
* chore(deps): bump terser from 5.14.1 to 5.15.1 by @dependabot in https://github.com/simPod/GrafanaJsonDatasource/pull/334
* chore(deps): bump loader-utils from 2.0.3 to 2.0.4 by @dependabot in https://github.com/simPod/GrafanaJsonDatasource/pull/335
* chore(deps): update yarn to v3.3.0 by @renovate in https://github.com/simPod/GrafanaJsonDatasource/pull/336
* chore(deps): bump simple-git from 3.7.1 to 3.15.1 by @dependabot in https://github.com/simPod/GrafanaJsonDatasource/pull/340
* New features: builder mode (like the builder mode of Prometheus).  by @MicroOps-cn in https://github.com/simPod/GrafanaJsonDatasource/pull/324
* chore(deps): update dependency @grafana/experimental to v1 by @renovate in https://github.com/simPod/GrafanaJsonDatasource/pull/342
* chore(deps): update yarn to v3.3.1 by @renovate in https://github.com/simPod/GrafanaJsonDatasource/pull/343
* chore(deps): update actions/stale action to v7 by @renovate in https://github.com/simPod/GrafanaJsonDatasource/pull/344
* fix: change /options method to POST by @0xMihir in https://github.com/simPod/GrafanaJsonDatasource/pull/345
* refactor: drop Format (queryType) by @simPod in https://github.com/simPod/GrafanaJsonDatasource/pull/346
* ci: run eslint and prettier in CI by @simPod in https://github.com/simPod/GrafanaJsonDatasource/pull/348
* refactor: drop MetricConfig.text by @simPod in https://github.com/simPod/GrafanaJsonDatasource/pull/347
* refactor: improve unknown payload by @simPod in https://github.com/simPod/GrafanaJsonDatasource/pull/349
* refactor: rename Beta to Experimental by @simPod in https://github.com/simPod/GrafanaJsonDatasource/pull/351
* refactor: rename /options to /metric-payload-options by @simPod in https://github.com/simPod/GrafanaJsonDatasource/pull/350
* refactor: reuse getMetricPayloadOptions() by @simPod in https://github.com/simPod/GrafanaJsonDatasource/pull/352
* docs: drop TOC since it can be generated by @simPod in https://github.com/simPod/GrafanaJsonDatasource/pull/353
* docs: use images from v0.6 in Readme by @simPod in https://github.com/simPod/GrafanaJsonDatasource/pull/354
* docs: refresh setup image by @simPod in https://github.com/simPod/GrafanaJsonDatasource/pull/355
* docs: use absolute paths to images by @simPod in https://github.com/simPod/GrafanaJsonDatasource/pull/356
* docs: refresh builder images by @simPod in https://github.com/simPod/GrafanaJsonDatasource/pull/357
* chore: add plugin-interactive-tools by @simPod in https://github.com/simPod/GrafanaJsonDatasource/pull/358
* chore(deps): bump grafana eslint config to v5.1 by @simPod in https://github.com/simPod/GrafanaJsonDatasource/pull/361
* docs: mention Swagger editor by @simPod in https://github.com/simPod/GrafanaJsonDatasource/pull/362
* chore: raise openapi version to 3.0.3 by @simPod in https://github.com/simPod/GrafanaJsonDatasource/pull/363
* ci: make renovate bump non-dev deps by @simPod in https://github.com/simPod/GrafanaJsonDatasource/pull/360
* chore(deps): update dependency react-virtualized-auto-sizer to ^1.0.7 by @renovate in https://github.com/simPod/GrafanaJsonDatasource/pull/364

## v0.5.0

* chore: require Grafana 9 by @simPod in https://github.com/simPod/GrafanaJsonDatasource/pull/308
* chore(deps): update dependency @grafana/runtime to v9 by @renovate in https://github.com/simPod/GrafanaJsonDatasource/pull/298
* chore(deps): update grafana packages to v9 (major) by @renovate in https://github.com/simPod/GrafanaJsonDatasource/pull/310
* ci: bump Node to v17 by @simPod in https://github.com/simPod/GrafanaJsonDatasource/pull/305
* ci: bump Node to v18 by @simPod in https://github.com/simPod/GrafanaJsonDatasource/pull/311

## v0.4.2

* fix: update openapi.yaml to match changes from v0.3.0. by @taylor-sutton in https://github.com/simPod/GrafanaJsonDatasource/pull/281
* Update /variables in README.md by @umyio in https://github.com/simPod/GrafanaJsonDatasource/pull/288
  https://github.com/simPod/GrafanaJsonDatasource/pull/304
* Update @grafana deps patch versions + rxjs
* Drop unused annotations code by @simPod in https://github.com/simPod/GrafanaJsonDatasource/pull/252

## v0.4.1
 
* Document new `/variable` endpoint by @simPod in https://github.com/simPod/GrafanaJsonDatasource/pull/232

## v0.4.0

This adds support for Query Variables. They now call `/variable` endpoint instead of `/search`.

_If you've used this datasource with Query Variables before, it will stop working for you probably. Open an issue for support._

![image](https://user-images.githubusercontent.com/327717/152781489-5e9afa45-96a5-4401-8561-cf242980685b.png)

### What's Changed
* Upgrade grafana deps to v8.1.x by @simPod in https://github.com/simPod/GrafanaJsonDatasource/pull/193
* Bump tmpl from 1.0.4 to 1.0.5 by @dependabot in https://github.com/simPod/GrafanaJsonDatasource/pull/194
* Upgrade Grafana deps to v8.1.5 by @simPod in https://github.com/simPod/GrafanaJsonDatasource/pull/195
* Do not use `event.currentTarget.name` as it's fragile by @simPod in https://github.com/simPod/GrafanaJsonDatasource/pull/196
* Use proper VariableQuery variable in `VariableQueryEditor::checkValidJSON()` by @simPod in https://github.com/simPod/GrafanaJsonDatasource/pull/197
* Do not override MetricFindValue type by @simPod in https://github.com/simPod/GrafanaJsonDatasource/pull/198
* Use rxjs by @simPod in https://github.com/simPod/GrafanaJsonDatasource/pull/199
* Upgrade @types/lodash to 4.14.176 by @simPod in https://github.com/simPod/GrafanaJsonDatasource/pull/210
* Upgrade rxjs to 7.4 by @simPod in https://github.com/simPod/GrafanaJsonDatasource/pull/211
* Add workflow_dispatch trigger to GA by @simPod in https://github.com/simPod/GrafanaJsonDatasource/pull/212
* Use actions/setup-node@v2 by @simPod in https://github.com/simPod/GrafanaJsonDatasource/pull/214
* Run CI on node 16 by @simPod in https://github.com/simPod/GrafanaJsonDatasource/pull/216
* Use Yarn v3 by @simPod in https://github.com/simPod/GrafanaJsonDatasource/pull/215
* Fix Readme typo by @chenyahui in https://github.com/simPod/GrafanaJsonDatasource/pull/220
* Add types to DataSource by @simPod in https://github.com/simPod/GrafanaJsonDatasource/pull/228
* Bump to Grafana 8.3.x deps by @simPod in https://github.com/simPod/GrafanaJsonDatasource/pull/227
* Add support for querying variables by @simPod in https://github.com/simPod/GrafanaJsonDatasource/pull/200
* Replace stale bot with GA by @simPod in https://github.com/simPod/GrafanaJsonDatasource/pull/229

## v0.3.0

### Features

- DataFrame is supported. Every response is converted to DataFrame now.
- Uses native Annotations
- `interval` variables are supported

### Breaking Changes

- Removed Format As input and with that a `type` field in request.
- Field `target.data` in request was renamed to `target.payload` (edit your Dashboard's JSON for easy migration).
- You should resave your variables as the legacy support has been dropped (it requires `{ query: string, format: string }` shape) https://github.com/simPod/GrafanaJsonDatasource/commit/77a042f56f334ee1e48b396a7a459cea028d0b3d

----------------

Constraint is set to Grafana 8.0.0+

## v0.2.6

Query Variables now have `Raw JSON` switch. When enabled, the query string is parsed as a JSON object. Otherwise when disabled, the query string is placed into a `target` key to create a JSON object.

## v0.2.5

- Security dep bumps
- Do not issue a query when metric is not selected #165
- This should be a last version in 0.2.x row

## v0.2.4

- Fixed order of processing Additional JSON, so we're first replacing variables and JSON parse after that in #149 (@istvan86-nagy)

## v0.2.3

- Upgrade deps to @grafana v7.3
- Require Grafana 7.3
